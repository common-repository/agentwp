import{r as i,j as e,c as P,u as S,a as F,o as ye,b as ee,S as et,d as tt,e as we,f as st,R as nt,P as at,N as rt,E as ot,g as it,A as ct,C as lt}from"./ClientSettingsProvider-1165ae1b.js";import{R as Ce,T as dt,B as C,c as Ne,a as Se,u as ut,b as mt,d as G,P as A,e as ht,I as gt,f as I,g as xt,S as ft,C as _e,L as pt,A as V,h as te,i as vt,j as bt}from"./Chat-ac935420.js";import{L as Fe}from"./LatestConvos-fedbffd9.js";/* empty css               */import"./_commonjsHelpers-725317a4.js";import"./WriteToEditor-63b22c42.js";const se=i.forwardRef(({className:t,...s},n)=>e.jsx(Ce,{className:P("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-slate-900 data-[state=unchecked]:bg-slate-200 dark:focus-visible:ring-slate-300 dark:focus-visible:ring-offset-slate-950 dark:data-[state=checked]:bg-slate-50 dark:data-[state=unchecked]:bg-slate-800",t),...s,ref:n,children:e.jsx(dt,{className:P("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 dark:bg-slate-950")})}));se.displayName=Ce.displayName;function Y({children:t}){return e.jsx("dl",{className:"grid grid-cols-2 gap-6 max-w-screen-sm mx-auto",children:t})}function R({children:t,label:s}){return e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-right",children:s}),e.jsx("dd",{className:"text-left",children:t})]})}function jt(){const{tryRequest:t}=S(),{page:s}=F(),[n,a]=i.useState(s.general_settings);async function o(r,c){const l=n,d={...l,[r]:c};await t("post","update_general_settings",d,()=>a(d),()=>a(l))}return e.jsx(R,{label:e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Cleanup Data"}),e.jsx("p",{className:"text-sm",children:"Clean up AgentWP plugin data after deactivation"})]}),children:e.jsx(se,{id:"cleanup_after_deactivate",checked:n==null?void 0:n.cleanup_after_deactivate,onCheckedChange:r=>o("cleanup_after_deactivate",r)})})}function yt(){const{page:{account_settings:t}}=F(),[s,n]=i.useState(t),{proxyApiRequest:a}=S();async function o(r,c){const l=s,d=s.map(x=>r===x.name?{...x,value:c}:x),u={name:r,value:c,label:null};ye(async()=>await a("siteSettingSave",u),()=>n(d),()=>n(l))}return e.jsx(e.Fragment,{children:s.map(r=>e.jsx(R,{label:e.jsx("label",{className:"font-bold",children:r.label}),children:e.jsx(se,{id:r.name,checked:r.value,onCheckedChange:c=>o(r.name,c)})},r.name))})}function wt(){const[t,s]=i.useState(!1),{restReq:n}=S();function a(){s(!0),n.post("tools_summarize").then(()=>s(!1))}return e.jsx(C,{isBusy:t,onClick:a,children:"Resummarize"})}function Ct(){return e.jsx(R,{label:e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Site Summary"}),e.jsx("p",{className:"text-sm",children:"AgentWP crawls your site weekly to summarize it for better understanding. Run this now instead of waiting."})]}),children:e.jsx(wt,{})})}function Nt(){var r;const{tryRequest:t}=S(),{page:s}=F(),[n,a]=i.useState((r=s.general_settings)==null?void 0:r.restricted_urls);async function o(c,l){const d=s.general_settings,u={...d,[c]:l};await t("post","update_general_settings",u,()=>a(l),()=>a(d.restricted_urls))}return e.jsxs(R,{label:e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Restricted URLs and Patterns"}),e.jsxs("p",{className:"text-sm",children:["Chat will not be available on these URLs or URL patterns. Put each on a new line. ",e.jsx("a",{className:"text-blue-500 hover:underline cursor-pointer underline",href:"https://agentwp.com/kb/restricted-url-patterns",target:"_blank",rel:"noreferrer",children:"Read more about URL patterns."})]})]}),children:[e.jsx("textarea",{className:"border border-gray-300 rounded w-full p-2",rows:5,value:n,onChange:c=>a(c.target.value)}),e.jsx(C,{variant:"brand",className:"mt-2",onClick:()=>o("restricted_urls",n),children:"Save"})]})}function xe(){const{restReq:t,tryRequest:s}=S(),{page:n,isConnected:a}=F(),{account:o}=ee(),[r,c]=i.useState(a),[l,d]=i.useState(!1),[u,x]=i.useState(!1),[g,p]=i.useState(!1);async function w(){d(!0);const{data:j}=await s("get","oauth_authorize");window.location=j.url}async function N(){x(!0);const{data:j}=await s("get","oauth_connect");window.location=j.url}function b(){p(!0),t.get("disconnect_site").then(()=>{p(!1),c(!1),window.location.reload()})}return e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx(Q,{header:"Plugin Settings",children:e.jsxs(Y,{children:[o&&!r&&e.jsx(R,{label:e.jsx("label",{className:"font-bold",children:"Login to AWP"}),children:e.jsx(C,{onClick:w,variant:"brand",disabled:l,isBusy:l,children:"Login"})}),r?e.jsx(R,{label:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Site Connection"}),e.jsxs("p",{className:"text-sm",children:["Your connected site ID is ",n.site_id]})]}),children:e.jsx(C,{onClick:b,variant:"brand",disabled:g,isBusy:g,children:"Disconnect Site"})}):e.jsx(R,{label:"Connect Your Site",children:e.jsx(C,{onClick:N,variant:"brand",disabled:u,isBusy:u,children:u?"Connecting to awp. Please wait...":"Connect To AWP"})}),e.jsx(jt,{}),e.jsx(Nt,{})]})}),e.jsx(Q,{header:"Conversation Settings",children:e.jsx(Y,{children:e.jsx(yt,{})})}),e.jsx(Q,{header:"Tools",children:e.jsx(Y,{children:e.jsx(Ct,{})})})]})}function St({children:t}){return e.jsx("h2",{className:"text-xl p-4 border-b border-brand-gray",children:t})}function Q({children:t,header:s}){return e.jsxs("div",{className:"space-y-4 border border-brand-gray rounded-xl bg-white",children:[e.jsx(St,{children:s}),e.jsx("div",{className:"p-4",children:t})]})}var ne="Tabs",[_t,_s]=Ne(ne,[Se]),Ae=Se(),[Ft,ae]=_t(ne),Ee=i.forwardRef((t,s)=>{const{__scopeTabs:n,value:a,onValueChange:o,defaultValue:r,orientation:c="horizontal",dir:l,activationMode:d="automatic",...u}=t,x=ut(l),[g,p]=mt({prop:a,onChange:o,defaultProp:r});return e.jsx(Ft,{scope:n,baseId:G(),value:g,onValueChange:p,orientation:c,dir:x,activationMode:d,children:e.jsx(A.div,{dir:x,"data-orientation":c,...u,ref:s})})});Ee.displayName=ne;var ke="TabsList",Ie=i.forwardRef((t,s)=>{const{__scopeTabs:n,loop:a=!0,...o}=t,r=ae(ke,n),c=Ae(n);return e.jsx(ht,{asChild:!0,...c,orientation:r.orientation,dir:r.dir,loop:a,children:e.jsx(A.div,{role:"tablist","aria-orientation":r.orientation,...o,ref:s})})});Ie.displayName=ke;var Pe="TabsTrigger",Re=i.forwardRef((t,s)=>{const{__scopeTabs:n,value:a,disabled:o=!1,...r}=t,c=ae(Pe,n),l=Ae(n),d=Le(c.baseId,a),u=De(c.baseId,a),x=a===c.value;return e.jsx(gt,{asChild:!0,...l,focusable:!o,active:x,children:e.jsx(A.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":u,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...r,ref:s,onMouseDown:I(t.onMouseDown,g=>{!o&&g.button===0&&g.ctrlKey===!1?c.onValueChange(a):g.preventDefault()}),onKeyDown:I(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&c.onValueChange(a)}),onFocus:I(t.onFocus,()=>{const g=c.activationMode!=="manual";!x&&!o&&g&&c.onValueChange(a)})})})});Re.displayName=Pe;var Te="TabsContent",Me=i.forwardRef((t,s)=>{const{__scopeTabs:n,value:a,forceMount:o,children:r,...c}=t,l=ae(Te,n),d=Le(l.baseId,a),u=De(l.baseId,a),x=a===l.value,g=i.useRef(x);return i.useEffect(()=>{const p=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(xt,{present:o||x,children:({present:p})=>e.jsx(A.div,{"data-state":x?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:u,tabIndex:0,...c,ref:s,style:{...t.style,animationDuration:g.current?"0s":void 0},children:p&&r})})});Me.displayName=Te;function Le(t,s){return`${t}-trigger-${s}`}function De(t,s){return`${t}-content-${s}`}var At=Ee,fe=Ie,Et=Re,kt=Me;function pe({children:t}){return e.jsx("div",{className:"uppercase font-bold text-xs bg-gray-100 text-black text-opacity-50 px-3 rounded-full",children:t})}function It({user:t}){const{tryRequest:s}=S(),[n,a]=i.useState(t.agentwp_access);async function o(r){t.is_current_user||await s("post","update_user",{user:t.id,agentwp_access:r},()=>a(r),()=>a(!r))}return e.jsxs("div",{className:`flex justify-between items-center p-2 ${n?"bg-gray-100":"bg-white"} hover:bg-gray-100 transition rounded-lg cursor-pointer`,onClick:()=>o(!n),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-8 h-8 rounded-full"}),e.jsx("div",{children:t.name}),t.is_current_user&&e.jsx(pe,{children:"YOU"}),e.jsx(pe,{children:t.role})]}),e.jsx("input",{type:"checkbox",disabled:t.is_current_user,checked:n,onChange:r=>r.stopPropagation(),className:"mr-2 border border-grey-100 shadow-none focus:ring-2 focus:ring-brand-primary-muted/70 active:ring-2 active:ring-brand-primary-muted/70 pointer-events-none"})]})}const Pt=t=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...t},i.createElement("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}));function Rt({searchUsers:t,searching:s}){return e.jsxs("div",{className:"flex items-center bg-white rounded px-4 py-2 border border-gray-300",children:[e.jsx(Pt,{className:"w-6 h-6 text-gray-300"}),e.jsx("input",{type:"text",onInput:n=>t(n.target.value),className:"w-full ml-2 shadow-none bg-transparent",placeholder:"Search for a user..."}),e.jsx(et,{show:s})]})}function Tt({children:t,...s}){return e.jsx("div",{...s,children:t})}function Ve(){const{restReq:t,tryRequest:s}=S(),[n,a]=i.useState([]),[o,r]=i.useState(!1);async function c(){const{data:d}=await s("get","agentwp_users",null,()=>r(!0),()=>r(!1));a(d),r(!1)}i.useEffect(()=>{c()},[]);function l(d){r(!0),t.get("agentwp_users",{params:{search:d}}).then(u=>{a(u.data.data),r(!1)})}return e.jsxs(e.Fragment,{children:[e.jsx(Rt,{searchUsers:l,searching:o}),e.jsx(Tt,{className:"mt-5",children:n.map(d=>e.jsx(It,{user:d},d.id))})]})}function K({children:t,className:s,title:n,...a}){return e.jsxs("div",{className:P("bg-white rounded-md p-4",s),...a,children:[n&&e.jsx("h2",{className:"font-bold mb-4",children:n}),t]})}function Mt({children:t,className:s,href:n,...a}){return e.jsx("li",{className:"group",children:e.jsxs("a",{href:n,className:P("group-odd:bg-brand-gray-20 bg-white block rounded-md px-3 py-1.5 text-sm leading-snug hover:!bg-brand-primary hover:text-white transition flex items-center",s),...a,children:[e.jsx("span",{className:"flex-1",children:t}),e.jsx(ft,{className:"w-4 h-4 ml-4 opacity-50"})]})})}function Ue({items:t,children:s,...n}){return e.jsxs("ul",{...n,children:[t==null?void 0:t.map((a,o)=>e.jsx(Mt,{...a},o)),s]})}function Lt(){const t="https://agentwp.com/wp-json/wp/v2/change/",[s,n]=i.useState([]);i.useEffect(function(){a()},[]);async function a(){try{const o=await tt.get(t);n(o.data)}catch(o){console.error(o)}}return s.length>0?e.jsx(Dt,{items:s}):e.jsx("p",{children:"Nothing yet!"})}function Dt({items:t}){const s=t.map(n=>({href:n.link,children:n.title.rendered,target:"_blank"}));return e.jsx(Ue,{items:s})}function Vt(){const t=[{title:"All Agents",url:"app.agentwp.com"},{title:"Billing",url:"app.agentwp.com/billing"},{title:"Agent Settings",url:"tab"},{title:"Changes and Updates",url:"agentwp.com/blog"},{title:"AgentWP Blog",url:"agentwp.com/blog"}];return e.jsx(Ue,{items:t.map(s=>({href:s.url,children:s.title,target:"_blank",rel:"noreferrer"}))})}function Ut(){return e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-5",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-5 h-full flex-1",children:[e.jsx("div",{className:"col-span-full xl:col-span-2",children:e.jsx("iframe",{className:"w-full h-full aspect-video",src:"https://www.youtube.com/embed/Ur3LOqwD7ZA?si=IKM3WBy12oy42LnX",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),e.jsx(K,{title:"Recent conversations",className:"col-span-full lg:col-span-1 row-span-2",children:e.jsx(Fe,{})}),e.jsx(K,{title:"Changelog",className:"col-span-full lg:col-span-1",children:e.jsx(Lt,{})}),e.jsx(K,{title:"Quicklinks",className:"col-span-full lg:col-span-1",children:e.jsx(Vt,{})})]}),e.jsx("div",{className:"flex-shrink",children:e.jsx(_e,{inline:!0})})]})}function zt(){return e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsx(K,{title:"History",className:"col-span-full md:col-span-1",children:e.jsx(Fe,{})}),e.jsx("div",{className:"col-span-full md:col-span-1",children:e.jsx(_e,{inline:!0})})]})}const M="px-3 lg:px-5 py-4 flex items-center justify-center text-sm lg:text-base leading-none select-none hover:text-brand-primary data-[state=active]:text-brand-dark  data-[state=active]:shadow-[inset_0_-1px_0_0,0_1px_0_0] data-[state=active]:shadow-brand-primary outline-none cursor-pointer disabled:cursor-not-allowed disabled:opacity-70";function W({value:t,title:s}){return e.jsx(Et,{className:M,value:t,children:s})}function D({value:t,children:s}){return e.jsx(kt,{className:"p-5 flex-1",value:t,children:s})}function Bt(){const{page:t}=F(),{account:s}=ee(),n=new URL(window.location.href),a=n.searchParams.get("tab")||"dashboard";function o(c){n.searchParams.set("tab",c),window.history.pushState({},"",n)}return window.agentwp.classList.add("h-full"),e.jsx("div",{className:"-ml-5 h-full",children:e.jsxs(At,{defaultValue:a,onValueChange:c=>o(c),className:"flex flex-col h-full",children:[e.jsx(r,{}),e.jsx(D,{value:"dashboard",children:e.jsx(Ut,{})}),e.jsx(D,{value:"history",children:e.jsx(zt,{})}),e.jsx(D,{value:"connect",children:e.jsx(xe,{})}),e.jsx(D,{value:"users",children:e.jsx(Ve,{})}),e.jsx(D,{value:"settings",children:e.jsx(xe,{})})]})});function r(){var c,l;return e.jsxs("div",{className:"bg-white p-6 pb-0 md:sticky md:top-8 z-50",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("img",{src:pt,alt:"AgentWP",className:"w-10 h-10 inline-block mr-2"}),((c=s==null?void 0:s.plan)==null?void 0:c.slug)==="pro"&&e.jsx("span",{className:"ml-3 inline-flex rounded-full items-center justify-center bg-brand-dark text-white px-3 py-2 text-sm font-bold uppercase",children:s==null?void 0:s.plan.name})]}),((l=s==null?void 0:s.plan)==null?void 0:l.slug)==="free"&&e.jsx("div",{className:"text-right",children:e.jsx(C,{variant:"brand",pill:!0,children:e.jsx("a",{href:s==null?void 0:s.upgrade_link,children:"Upgrade to Pro"})})})]}),e.jsxs("div",{className:"flex flex-col-reverse md:flex-row items-center md:items-end justify-center md:justify-between md:mt-5",children:[e.jsxs(fe,{className:"flex","aria-label":"Manage your account",children:[e.jsx(W,{value:"dashboard",title:"Dashboard"}),t.agentwp_users_manager&&e.jsx(W,{value:"users",title:"Access"}),e.jsx(W,{value:"history",title:"History"}),e.jsx(V,{content:"Coming soon",side:"top",children:e.jsx("button",{className:M,disabled:!0,children:"Integrations"})}),e.jsx(V,{content:"Coming soon",side:"top",children:e.jsx("button",{className:M,disabled:!0,children:"Tasks"})}),t.agentwp_manager&&e.jsx(W,{value:"settings",title:"Settings"})]}),e.jsxs(fe,{className:"flex justify-end items-end","aria-label":"Manage your account",children:[e.jsx("a",{className:M,href:"https://app.agentwp.com/support",children:"Support"}),e.jsx("a",{className:M,href:"https://agentwp.com/blog",children:"What's New?"}),e.jsx("a",{className:M,href:"https://app.agentwp.com/dashboard",children:"Account"})]})]})]})}}function ve({accepted:t,className:s,...n}){const{tryRequest:a}=S(),[o,r]=i.useState(!1);async function c(){r(!0);const{data:l}=await a("get","oauth_connect");window.location=l.url}return e.jsx(C,{disabled:o||!t,onClick:c,className:P("w-full",!t&&"cursor-not-allowed",s),variant:"brand",size:"lg",isBusy:o,...n,children:"Connect AI Services"})}var[re,Fs]=Ne("Form"),oe="Form",[qt,z]=re(oe),[Ot,ze]=re(oe),Be=i.forwardRef((t,s)=>{const{__scopeForm:n,onClearServerErrors:a=()=>{},...o}=t,r=i.useRef(null),c=te(s,r),[l,d]=i.useState({}),u=i.useCallback(h=>l[h],[l]),x=i.useCallback((h,v)=>d(f=>({...f,[h]:{...f[h]??{},...v}})),[]),g=i.useCallback(h=>{d(v=>({...v,[h]:void 0})),m(v=>({...v,[h]:{}}))},[]),[p,w]=i.useState({}),N=i.useCallback(h=>p[h]??[],[p]),b=i.useCallback((h,v)=>{w(f=>({...f,[h]:[...f[h]??[],v]}))},[]),j=i.useCallback((h,v)=>{w(f=>({...f,[h]:(f[h]??[]).filter(_=>_.id!==v)}))},[]),[E,m]=i.useState({}),y=i.useCallback(h=>E[h]??{},[E]),k=i.useCallback((h,v)=>{m(f=>({...f,[h]:{...f[h]??{},...v}}))},[]),[L,T]=i.useState({}),H=i.useCallback((h,v)=>{T(f=>{const _=new Set(f[h]).add(v);return{...f,[h]:_}})},[]),q=i.useCallback((h,v)=>{T(f=>{const _=new Set(f[h]);return _.delete(v),{...f,[h]:_}})},[]),O=i.useCallback(h=>Array.from(L[h]??[]).join(" ")||void 0,[L]);return e.jsx(qt,{scope:n,getFieldValidity:u,onFieldValidityChange:x,getFieldCustomMatcherEntries:N,onFieldCustomMatcherEntryAdd:b,onFieldCustomMatcherEntryRemove:j,getFieldCustomErrors:y,onFieldCustomErrorsChange:k,onFieldValiditionClear:g,children:e.jsx(Ot,{scope:n,onFieldMessageIdAdd:H,onFieldMessageIdRemove:q,getFieldDescription:O,children:e.jsx(A.form,{...o,ref:c,onInvalid:I(t.onInvalid,h=>{const v=Ge(h.currentTarget);v===h.target&&v.focus(),h.preventDefault()}),onSubmit:I(t.onSubmit,a,{checkForDefaultPrevented:!1}),onReset:I(t.onReset,a)})})})});Be.displayName=oe;var ie="FormField",[Wt,ce]=re(ie),qe=i.forwardRef((t,s)=>{const{__scopeForm:n,name:a,serverInvalid:o=!1,...r}=t,l=z(ie,n).getFieldValidity(a),d=G();return e.jsx(Wt,{scope:n,id:d,name:a,serverInvalid:o,children:e.jsx(A.div,{"data-valid":de(l,o),"data-invalid":ue(l,o),...r,ref:s})})});qe.displayName=ie;var J="FormLabel",Oe=i.forwardRef((t,s)=>{const{__scopeForm:n,...a}=t,o=z(J,n),r=ce(J,n),c=a.htmlFor||r.id,l=o.getFieldValidity(r.name);return e.jsx(vt,{"data-valid":de(l,r.serverInvalid),"data-invalid":ue(l,r.serverInvalid),...a,ref:s,htmlFor:c})});Oe.displayName=J;var $="FormControl",We=i.forwardRef((t,s)=>{const{__scopeForm:n,...a}=t,o=z($,n),r=ce($,n),c=ze($,n),l=i.useRef(null),d=te(s,l),u=a.name||r.name,x=a.id||r.id,g=o.getFieldCustomMatcherEntries(u),{onFieldValidityChange:p,onFieldCustomErrorsChange:w,onFieldValiditionClear:N}=o,b=i.useCallback(async m=>{if(He(m.validity)){const f=X(m.validity);p(u,f);return}const y=m.form?new FormData(m.form):new FormData,k=[m.value,y],L=[],T=[];g.forEach(f=>{Zt(f,k)?T.push(f):Jt(f)&&L.push(f)});const H=L.map(({id:f,match:_})=>[f,_(...k)]),q=Object.fromEntries(H),O=Object.values(q).some(Boolean),h=O;m.setCustomValidity(h?U:"");const v=X(m.validity);if(p(u,v),w(u,q),!O&&T.length>0){const f=T.map(({id:Xe,match:Ze})=>Ze(...k).then(Je=>[Xe,Je])),_=await Promise.all(f),ge=Object.fromEntries(_),Ye=Object.values(ge).some(Boolean);m.setCustomValidity(Ye?U:"");const Qe=X(m.validity);p(u,Qe),w(u,ge)}},[g,u,w,p]);i.useEffect(()=>{const m=l.current;if(m){const y=()=>b(m);return m.addEventListener("change",y),()=>m.removeEventListener("change",y)}},[b]);const j=i.useCallback(()=>{const m=l.current;m&&(m.setCustomValidity(""),N(u))},[u,N]);i.useEffect(()=>{var y;const m=(y=l.current)==null?void 0:y.form;if(m)return m.addEventListener("reset",j),()=>m.removeEventListener("reset",j)},[j]),i.useEffect(()=>{const m=l.current,y=m==null?void 0:m.closest("form");if(y&&r.serverInvalid){const k=Ge(y);k===m&&k.focus()}},[r.serverInvalid]);const E=o.getFieldValidity(u);return e.jsx(A.input,{"data-valid":de(E,r.serverInvalid),"data-invalid":ue(E,r.serverInvalid),"aria-invalid":r.serverInvalid?!0:void 0,"aria-describedby":c.getFieldDescription(u),title:"",...a,ref:d,id:x,name:u,onInvalid:I(t.onInvalid,m=>{const y=m.currentTarget;b(y)}),onChange:I(t.onChange,m=>{j()})})});We.displayName=$;var U="This value is not valid",Kt={badInput:U,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},B="FormMessage",Ke=i.forwardRef((t,s)=>{const{match:n,name:a,...o}=t,r=ce(B,t.__scopeForm),c=a??r.name;return n===void 0?e.jsx(le,{...o,ref:s,name:c,children:t.children||U}):typeof n=="function"?e.jsx(Gt,{match:n,...o,ref:s,name:c}):e.jsx($t,{match:n,...o,ref:s,name:c})});Ke.displayName=B;var $t=i.forwardRef((t,s)=>{const{match:n,forceMatch:a=!1,name:o,children:r,...c}=t,d=z(B,c.__scopeForm).getFieldValidity(o);return a||(d==null?void 0:d[n])?e.jsx(le,{ref:s,...c,name:o,children:r??Kt[n]}):null}),Gt=i.forwardRef((t,s)=>{const{match:n,forceMatch:a=!1,name:o,id:r,children:c,...l}=t,d=z(B,l.__scopeForm),u=i.useRef(null),x=te(s,u),g=G(),p=r??g,w=i.useMemo(()=>({id:p,match:n}),[p,n]),{onFieldCustomMatcherEntryAdd:N,onFieldCustomMatcherEntryRemove:b}=d;i.useEffect(()=>(N(o,w),()=>b(o,w.id)),[w,o,N,b]);const j=d.getFieldValidity(o),m=d.getFieldCustomErrors(o)[p];return a||j&&!He(j)&&m?e.jsx(le,{id:p,ref:x,...l,name:o,children:c??U}):null}),le=i.forwardRef((t,s)=>{const{__scopeForm:n,id:a,name:o,...r}=t,c=ze(B,n),l=G(),d=a??l,{onFieldMessageIdAdd:u,onFieldMessageIdRemove:x}=c;return i.useEffect(()=>(u(o,d),()=>x(o,d)),[o,d,u,x]),e.jsx(A.span,{id:d,...r,ref:s})}),Ht="FormSubmit",$e=i.forwardRef((t,s)=>{const{__scopeForm:n,...a}=t;return e.jsx(A.button,{type:"submit",...a,ref:s})});$e.displayName=Ht;function X(t){const s={};for(const n in t)s[n]=t[n];return s}function Yt(t){return t instanceof HTMLElement}function Qt(t){return"validity"in t}function Xt(t){return Qt(t)&&(t.validity.valid===!1||t.getAttribute("aria-invalid")==="true")}function Ge(t){const s=t.elements,[n]=Array.from(s).filter(Yt).filter(Xt);return n}function Zt(t,s){return t.match.constructor.name==="AsyncFunction"||es(t.match,s)}function Jt(t){return t.match.constructor.name==="Function"}function es(t,s){return t(...s)instanceof Promise}function He(t){let s=!1;for(const n in t){const a=n;if(a!=="valid"&&a!=="customError"&&t[a]){s=!0;break}}return s}function de(t,s){if((t==null?void 0:t.valid)===!0&&!s)return!0}function ue(t,s){if((t==null?void 0:t.valid)===!1||s)return!0}var ts=Be,ss=qe,ns=Oe,as=We,be=Ke,rs=$e;function os({name:t,value:s,label:n,placeholder:a,required:o,validateMessage:r,onChange:c,labelInstructions:l}){const[d,u]=i.useState(s);function x(g){u(g.target.value),c&&c(g.target.value)}return e.jsxs(ss,{className:"mt-4",name:"textarea",children:[e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx(ns,{className:"font-medium leading-[35px]",children:n}),l]}),e.jsx(as,{asChild:!0,children:e.jsx("textarea",{className:"w-full h-[120px] bg-white rounded-[5px] border p-2",required:o,placeholder:a,value:d,name:t,onChange:g=>x(g)})}),e.jsx(be,{className:"text-sm text-red-600",match:"valueMissing",children:r!=null&&r.missing?r.missing:"This field is required"}),(r==null?void 0:r.custom)&&e.jsx(be,{className:"text-sm text-red-600",children:r.custom})]})}function is({accepted:t,onToggleManual:s}){const{tryRequest:n}=S(),{page:a,getApiUrl:o}=F(),[r,c]=i.useState(!1),[l,d]=i.useState(""),[u,x]=i.useState(!1),[g,p]=i.useState({apiKey:""});function w(){c(!r),s(!r)}async function N(b){b.preventDefault();const j=await n("post","manual_activation",{apiKey:l},()=>x(!0),E=>{x(!1),p({...g,apiKey:E||"Error"})});j.success?document.location.reload():(p({...g,apiKey:""}),console.error(j.message))}return e.jsxs("div",{className:"flex flex-col",children:[r&&e.jsxs(ts,{onSubmit:b=>N(b),onClearServerErrors:()=>p({...g,apiKey:""}),children:[e.jsx(os,{name:"apiKey",value:l,placeholder:"Enter your API key",label:"API key",required:!0,onChange:b=>d(b),validateMessage:{missing:"Please enter your API key",custom:g.apiKey},labelInstructions:e.jsx("a",{target:"_blank",className:"underline",href:`${o("oauthManuallyConnectSite")}?url=${encodeURIComponent(a.home_url)}`,children:"Click here to get your API key"})}),t?e.jsx(rs,{asChild:!0,children:e.jsx(C,{className:"w-full mt-2",variant:"brand",size:"lg",isBusy:u,children:"Connect"})}):e.jsx(V,{content:"Please accept the terms and conditions",children:e.jsx("div",{children:e.jsx(C,{disabled:!0,className:P("w-full mt-2","cursor-not-allowed"),variant:"brand",size:"lg",children:"Connect"})})})]}),e.jsx("span",{onClick:w,className:"underline cursor-pointer w-full text-center mt-4 opacity-50",children:r?"Use auto connection (default)":"Or, Manually Connect AI services"})]})}function me({siteIcon:t,message:s}){return e.jsxs("div",{className:"text-pretty",children:[e.jsxs("div",{className:"flex justify-start items-center mb-4",children:[t&&e.jsx("img",{src:t,alt:"Site Icon",className:"w-14 h-14 -mr-4"}),e.jsx(bt,{className:"w-14 h-14 rounded-full bg-white"})]}),e.jsx("div",{className:"text-4xl font-semibold text-left text-brand-dark mb-4 leading-10",children:s})]})}function he({children:t,className:s}){return(()=>{const a=document.createElement("style");a.textContent=`
      body {
        background-color: white !important;
      }
      ul#adminmenu a.wp-has-current-submenu:after,
      ul#adminmenu > li.current > a.current:after {
        border-right-color: white !important;
      }
      #wpcontent {
      padding:10px!important;}
    `,document.head.appendChild(a)})(),e.jsx("div",{className:P("max-w-md mx-auto mt-8 p-8 border rounded-lg border-grey-100",s),children:t})}function cs(){const{page:t}=F(),[s,n]=i.useState(!1),[a,o]=i.useState(!1),{tryRequest:r}=S();async function c(){const l=!s;try{await ye(async()=>{l&&await r("post","accept_terms",{accepted:!s})},()=>{n(l)},d=>{throw new Error(d)})}catch{}}return e.jsxs(he,{children:[e.jsx(me,{siteIcon:t.site_icon_url,message:`Connect ${t.site_title} Site to AgentWP Services`}),e.jsxs("div",{className:"text-brand-gray-70 -mb-4",children:[e.jsx("p",{className:"text-lg mt-4",children:"To begin using AgentWP, connect it to the Al services. If this is your first time connecting this site, a quick indexing process will take place."}),e.jsxs("div",{className:"mt-4 rounded-lg bg-gray-100 p-6 text-base",children:[e.jsx("h3",{className:"text-left",children:"AgentWP will have access to:"}),e.jsxs("ul",{className:"mt-4 space-y-4 list-disc pl-5",children:[e.jsx("li",{title:"Active plugins & themes, uploads, and logs",children:"/wp-content/"}),e.jsx("li",{title:"Database structure, database content (encrypted)",children:"Database"}),e.jsx("li",{children:"Site Health"})]})]}),e.jsx("p",{className:"mt-4 italic",children:"Your data is private. It will never be used for AI training, and is encrypted at rest and transit."}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"mb-4 flex gap-1 items-center",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:c,className:"mr-2 border border-grey-100 shadow-none focus:ring-2 focus:ring-brand-primary-muted/70 active:ring-2 active:ring-brand-primary-muted/70"})," ","I agree to the",e.jsx("a",{href:"https://agentwp.com/legal/terms/",target:"_blank",className:"underline",children:"Terms"}),"and",e.jsx("a",{href:"https://agentwp.com/legal/privacy/",target:"_blank",className:"underline",children:"Privacy Policy"})]}),!a&&(s?e.jsx(ve,{accepted:s}):e.jsx(V,{content:"Please accept the terms and conditions",children:e.jsx("div",{children:e.jsx(ve,{accepted:s,className:"cursor-not-allowed"})})})),e.jsx(is,{accepted:s,onToggleManual:l=>o(l)})]})]})]})}function ls(){const{restReq:t}=S();function s(){t.post("onboarding_completed").then(()=>{document.location.reload()})}return e.jsxs(he,{className:"space-y-4",children:[e.jsx(me,{message:"Choose Who Can Use AgentWP"}),e.jsx(Ve,{}),e.jsx(C,{variant:"brand",size:"lg",className:"w-full",onClick:()=>s(),children:"Continue"})]})}function ds(){const{page:t}=F(),{account:s}=ee(),{updateSetting:n}=we();function a(d){return t.plans.find(u=>u.slug===d)}const o=a("pro"),c={name:"Supporter Plan",price:`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o.priceMonthly)}/month`,features:[e.jsx(us,{}),"More accurate AI","Faster responses","5 users per website",e.jsx("strong",{className:"italic",children:"Priority access to agent features as they're released"})],buttonText:"Upgrade this Site to Pro",buttonAction:()=>{n("planSelected",!0),s&&(window.location.href=s.upgrade_link)}},l=()=>{n("planSelected",!0)};return e.jsxs(he,{className:"space-y-6",children:[e.jsx(me,{message:"You've successfully connected to AI Services"}),e.jsx("p",{className:"text-left text-xl text-brand-gray-70",children:"Choose a site specific plan to get started:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ms,{...c}),e.jsx(C,{variant:"ghost",size:"lg",className:"w-full text-gray-500 bg-gray-100",onClick:l,children:"Or, continue with free"})]})]})}function us(){return e.jsx(V,{content:e.jsxs("p",{children:["Subject to our"," ",e.jsx("a",{href:"https://agentwp.com/legal/terms/",className:"underline underline-offset-1",children:"fair use policy"}),"."]}),children:e.jsx("p",{children:"Unlimited usage *"})})}function ms({name:t,features:s,buttonText:n,price:a,buttonAction:o}){return e.jsxs("div",{className:"rounded-lg p-6 bg-gray-100",children:[e.jsxs("div",{className:"mb-6 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t}),a&&e.jsx("p",{className:"text-xl font-semibold text-brand-dark/50",children:a}),e.jsx("ul",{className:"space-y-2",children:s.map((r,c)=>e.jsx("li",{children:r},c))})]}),e.jsx(C,{variant:"brand",size:"lg",className:"w-full",onClick:o,children:n})]})}const hs=t=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...t},i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"})),gs=t=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...t},i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}));function xs({currentStep:t,steps:s}){return e.jsx("div",{className:"mt-8 flex items-center justify-center gap-3",children:s.map((n,a)=>{const o={state:t===a?"active":t>a?"completed":"next",title:n.text};return e.jsxs(i.Fragment,{children:[e.jsx(fs,{...o}),a<s.length-1&&e.jsx(ps,{})]},a)})})}function fs({title:t,state:s}){return e.jsxs("span",{className:P("flex items-center gap-1",{"opacity-50":s!=="active"}),children:[s==="completed"?e.jsx(gs,{className:"h-4 w-4"}):e.jsx(hs,{className:"h-4 w-4"}),t]})}function ps(){return e.jsx("span",{className:"block h-0.5 w-4 bg-black/10"})}const je=[{text:"Install",subpage:void 0},{text:"Connect",subpage:e.jsx(cs,{})},{text:"Plan",subpage:e.jsx(ds,{})},{text:"Access",subpage:e.jsx(ls,{})}];function vs(){const{page:t}=F(),{settings:s}=we(),n=()=>t.is_connected?s.planSelected&&!t.onboarding_completed?3:2:1;return e.jsxs("div",{children:[e.jsx(xs,{currentStep:n(),steps:je}),je[n()].subpage]})}const Z=document.getElementById("agentwp-admin-settings");if(Z){const t=st.createRoot(Z);window.agentwp=Z,t.render(e.jsx(nt.StrictMode,{children:e.jsx(at,{page:agentwpData,children:e.jsx(rt,{children:e.jsx(ot,{children:e.jsx(it,{children:e.jsx(ct,{children:e.jsx(lt,{children:agentwpData!=null&&agentwpData.onboarding_completed?e.jsx(Bt,{}):e.jsx(vs,{})})})})})})})}))}else console.error("Root element not found");
//# sourceMappingURL=settings-e44e7636.js.map
